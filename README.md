# 食事メニュー分析・提案アプリ

毎日の食事記録から傾向を分析し、次の食事メニューを提案するPythonアプリケーションです。

## 機能

- **食事記録の管理**: 朝食、昼食、夕食、間食を簡単に記録
- **傾向分析**: よく食べるメニュー、カテゴリー分布、栄養バランスを分析
- **メニュー提案**: 過去の食事データから最適な次の食事を提案
- **多様性スコア**: 食事の多様性を数値化して可視化

## インストール

### 必要な環境

- Python 3.7以上

### セットアップ

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/x-post-agent.git
cd x-post-agent

# 依存パッケージをインストール（オプション）
pip install -r requirements.txt
```

## 使い方

### アプリの起動

```bash
python main.py
```

### 基本的な使い方

アプリを起動すると、以下のメニューが表示されます：

```
==================================================
  食事メニュー分析・提案アプリ
==================================================

1. 食事記録を追加
2. 最近の食事記録を表示
3. 傾向を分析
4. メニューを提案
5. 終了
```

#### 1. 食事記録を追加

食事タイプ、メニュー項目、カテゴリー、タグなどを入力して記録を追加します。

**入力例:**
- 食事タイプ: 昼食 (lunch)
- メニュー: ご飯, 味噌汁, 焼き魚
- カテゴリー: 和食
- タグ: ヘルシー, 高タンパク

#### 2. 最近の食事記録を表示

直近10件の食事記録を時系列で表示します。

#### 3. 傾向を分析

蓄積された食事データから以下の情報を分析・表示します：

- 総記録数
- 食事の多様性スコア（0.0-1.0）
- よく食べるメニュー TOP5
- カテゴリー別分布
- 食事タイプ別分布
- 最近不足しているカテゴリー
- 栄養バランス状態

#### 4. メニューを提案

過去の食事傾向から、次に食べるべきメニューを提案します。

**提案内容:**
- おすすめメニューリスト
- カテゴリー
- 提案理由
- 栄養バランスアドバイス
- 信頼度スコア

## プロジェクト構成

```
x-post-agent/
├── src/
│   └── meal_tracker/
│       ├── __init__.py
│       ├── models.py          # データモデル
│       ├── storage.py         # データ保存・読み込み
│       ├── analyzer.py        # 傾向分析エンジン
│       ├── recommender.py     # メニュー提案エンジン
│       └── cli.py             # CLIインターフェース
├── data/
│   └── meals.json             # 食事データ（自動生成）
├── main.py                    # エントリーポイント
├── requirements.txt
└── README.md
```

## データ構造

### 食事記録 (Meal)

```python
{
  "id": "uuid",
  "datetime": "2025-10-28T12:00:00",
  "meal_type": "lunch",
  "menu_items": ["ご飯", "味噌汁", "焼き魚"],
  "categories": ["和食"],
  "tags": ["ヘルシー", "高タンパク"],
  "calories": 650,
  "notes": "美味しかった"
}
```

### メニュー提案 (MealRecommendation)

```python
{
  "recommended_items": ["パスタ", "サラダ"],
  "categories": ["洋食"],
  "reason": "最近洋食を食べていないため、バランスを考慮しました。",
  "nutritional_balance": {
    "ヘルシー": "ヘルシーのメニューを増やしましょう",
    "高タンパク": "高タンパクも意識してみてください"
  },
  "confidence_score": 0.85
}
```

## 分析アルゴリズム

### 1. 傾向分析

- **頻度分析**: メニュー項目、カテゴリー、タグの出現頻度を集計
- **多様性スコア**: ユニークなメニュー数 / 総メニュー数
- **不足カテゴリー検出**: 過去全体と最近7日間を比較

### 2. メニュー提案

- **バランス優先**: 最近食べていないカテゴリーを優先
- **多様性確保**: 最近10件に含まれていないメニューを選択
- **栄養バランス**: タグベースで栄養状態を評価

### 3. 信頼度スコア

データ量に応じて提案の信頼度を算出：

- 0件: 0.3
- 1-4件: 0.5
- 5-9件: 0.7
- 10-19件: 0.85
- 20件以上: 0.95

## 拡張可能性

### カスタムメニューデータベース

`src/meal_tracker/recommender.py`の`MENU_DATABASE`を編集して、独自のメニューリストを追加できます。

### API化

`storage.py`と`recommender.py`を使って、Web APIとしても利用可能です。

## ライセンス

MIT License

## 貢献

プルリクエストを歓迎します！バグ報告や機能提案はIssueでお願いします。

## お問い合わせ

質問や提案があれば、Issueを作成してください。